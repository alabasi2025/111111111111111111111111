# بنية مجلدات server/_core

تم إنشاء بنية المجلدات الأساسية لطبقة الخادم (server) ضمن المجلد `_core`، وهي مصممة لاتباع نمط **فصل الاهتمامات (Separation of Concerns)** لضمان تنظيم الكود وسهولة صيانته وتطويره.

## المجلدات التي تم إنشاؤها:

| المجلد | المسار النسبي | الوصف والمسؤولية |
| :--- | :--- | :--- |
| `routes` | `server/_core/routes` | يحتوي على تعريفات المسارات (Routes) الخاصة بالتطبيق. هذه الملفات مسؤولة عن توجيه طلبات HTTP الواردة إلى وحدات التحكم (Controllers) المناسبة. |
| `controllers` | `server/_core/controllers` | يحتوي على وحدات التحكم (Controllers). وهي الطبقة المسؤولة عن معالجة منطق الطلب، واستدعاء الخدمات (Services)، وتنسيق البيانات قبل إرسال الاستجابة (Response) إلى العميل. |
| `middleware` | `server/_core/middleware` | يحتوي على وظائف البرمجيات الوسيطة (Middleware). تُستخدم هذه الوظائف لتنفيذ عمليات قبل أو بعد معالجة الطلب الرئيسي، مثل التحقق من المصادقة (Authentication)، التفويض (Authorization)، تسجيل الطلبات (Logging)، ومعالجة الأخطاء. |
| `services` | `server/_core/services` | يحتوي على طبقة الخدمات (Services) أو منطق الأعمال (Business Logic). هذه الطبقة مسؤولة عن تنفيذ العمليات المعقدة، التفاعل مع قواعد البيانات (إذا لم يكن هناك طبقة ORM منفصلة)، والتأكد من صحة البيانات. |

## مثال على تدفق الطلب (Request Flow):

1.  يصل طلب HTTP إلى الخادم.
2.  يتم استقبال الطلب بواسطة ملفات `routes`.
3.  يتم تطبيق أي `middleware` ضروري (مثل التحقق من التوكن).
4.  يتم تمرير الطلب إلى الدالة المناسبة في `controllers`.
5.  يستدعي `controller` وظيفة أو أكثر من `services` لتنفيذ منطق الأعمال.
6.  تعيد `services` البيانات إلى `controller`.
7.  يرسل `controller` الاستجابة النهائية إلى العميل.